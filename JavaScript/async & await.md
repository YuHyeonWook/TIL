# async & await

### Promise then() ì§€ì˜¥

- then() ë©”ì„œë“œê°€ ì§€ë‚˜ì¹˜ê²Œ ì²´ì¸ë˜ì–´ ë°˜ë³µë˜ë©´ ì½”ë“œê°€ ì¥í™©í•´ì§€ê³  ê°€ë…ì„±ì´ êµ‰ì¥íˆ ë–¨ì–´ì§ˆ ìˆ˜ ê°€ ìˆë‹¤.

```jsx
fetch("https://api.github.com/users")
  .then((response) => {
    if (response.ok) {
      return response.json();
    } else {
      throw new Error("Network Error");
    }
  })
  .then((users) => {
    return users.map((user) => user.login);
  })
  .then((logins) => {
    return logins.join(", ");
  })
  .then((result) => {
    console.log(result);
  })
  .catch((error) => {
    console.error(error);
  });
```

- ìœ„ ì˜ˆì‹œ ì½”ë“œëŠ” fetch í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ê¹ƒí—ˆë¸Œ APIì—ì„œ ìœ ì € ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ê³ , then ë©”ì„œë“œë¥¼ ì—¬ëŸ¬ ë²ˆ ì—°ê²°í•˜ì—¬ ìœ ì €ë“¤ì˜ ë¡œê·¸ì¸ ì´ë¦„ì„ ì‰¼í‘œë¡œ êµ¬ë¶„í•œ ë¬¸ìì—´ë¡œ ë§Œë“¤ì–´ ì¶œë ¥í•˜ëŠ” ë¹„ë™ê¸° ì‘ì—…ì„ ìˆ˜í–‰í•œë‹¤.
- ì´ëŸ°ì‹ìœ¼ë¡œ thenì„ ëŠ˜ì–´ëœ¨ì–´ ë†“ìœ¼ë©´ ì½”ë“œê°€ ê¸¸ì–´ì§€ê³ , ê° then ë©”ì„œë“œê°€ ì–´ë–¤ ê°’ì„ ë°˜í™˜í•˜ëŠ”ì§€ íŒŒì•…í•˜ê¸° ì–´ë µê²Œ ëœë‹¤.
- ë˜í•œ, catch ë©”ì„œë“œê°€ ë§ˆì§€ë§‰ì— í•œ ë²ˆë§Œ ì‚¬ìš©ë˜ì–´ ìˆê¸° ë•Œë¬¸ì—, ì¤‘ê°„ì— ë°œìƒí•  ìˆ˜ ìˆëŠ” ì—ëŸ¬ë‚˜ ì˜ˆì™¸ ìƒí™©ì— ëŒ€ì‘í•˜ê¸° ì–´ë µë‹¤.
- ì´ë¥¼ ê·¹ë³µí•˜ê¸° ìœ„í•´ ë‚˜ì˜¨ ê²ƒì´ async/awaití‚¤ì›Œë“œì´ë‹¤.

```jsx
try {
  const response = await fetch("");
  if (response.ok) {
    const users = await response.json();
    const logins = users.map((user) => user.login);
    const result = logins.join(", ");
    console.log(result);
  } else {
    throw new Error("Network Error");
  }
} catch (error) {
  console.error(error);
}
```

- async/await í‚¤ì›Œë“œëŠ” ES8ì—ì„œ ë„ì…ëœ ë¹„ë™ê¸° ì²˜ë¦¬ë¥¼ ìœ„í•œ ë¬¸ë²•ìœ¼ë¡œ, í”„ë¡œë¯¸ìŠ¤ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•˜ì§€ë§Œ thenê³¼ catch ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³  ë¹„ë™ê¸° ì‘ì—…ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆë‹¤. async/await í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•˜ë©´ ë¹„ë™ê¸° ì‘ì—…ì„ ë§ˆì¹˜ ë™ê¸° ì‘ì—…ì²˜ëŸ¼ ì“¸ ìˆ˜ ìˆì–´ì„œ ì½”ë“œê°€ ê°„ê²°í•˜ê³  ê°€ë…ì„±ì´ ì¢‹ì•„ì§€ê²Œ ëœë‹¤.

# async & await

- async/awaitëŠ” ES2017ì— ë„ì…ëœ ë¬¸ë²•ìœ¼ë¡œì„œ, Promise ë¡œì§ì„ ë” ì‰½ê³  ê°„ê²°í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ í•´ì¤€ë‹¤.
  - ìœ ì˜í•´ì•¼ í•  ì ì´ async/awaitê°€ Promiseë¥¼ ëŒ€ì²´í•˜ê¸° ìœ„í•œ ê¸°ëŠ¥ì´ ì•„ë‹ˆë‹¤.
  - ë‚´ë¶€ì ìœ¼ë¡œëŠ” ì—¬ì „íˆ Promiseë¥¼ ì‚¬ìš©í•´ì„œÂ ë¹„ë™ê¸°ë¥¼ ì²˜ë¦¬í•˜ê³ , ë‹¨ì§€ ì½”ë“œ ì‘ì„± ë¶€ë¶„ì„ í”„ë¡œê·¸ë˜ë¨¸ê°€ ìœ ì§€ë³´ìˆ˜í•˜ê²Œ í¸í•˜ê²Œ ë³´ì´ëŠ” ë¬¸ë²•ë§Œ ë‹¤ë¥´ê²Œ í•´ì¤„ ë¿ì´ë¼ëŠ” ê²ƒì´ë‹¤.

## async / await ê¸°ë³¸ ì‚¬ìš©ë²•

- async ì™€ await ëŠ” ì ˆì°¨ì  ì–¸ì–´ì—ì„œ ì‘ì„±í•˜ëŠ” ì½”ë“œì™€ ê°™ì´ ì‚¬ìš©ë²•ë„ ê°„ë‹¨í•˜ê³  ì´í•´í•˜ê¸°ë„ ì‰½ë‹¤.
  - `await`Â í‚¤ì›Œë“œëŠ” ì˜¤ì§Â `async`Â ë¡œ ì •ì˜ëœ í•¨ìˆ˜ì˜ ë‚´ë¶€ì—ì„œë§Œ ì‚¬ìš©ë  ìˆ˜ ìˆë‹¤.
  - function í‚¤ì›Œë“œ ì•ì—asyncÂ ë§Œ ë¶™ì—¬ì£¼ë©´ ë˜ê³ ,Â ë¹„ë™ê¸°ë¡œ ì²˜ë¦¬ë˜ëŠ” ë¶€ë¶„ ì•ì— await ë§Œ ë¶™ì—¬ì£¼ë©´ ëœë‹¤.
  - ëª¨ë“ Â `async`Â í•¨ìˆ˜ëŠ” ì•”ë¬µì ìœ¼ë¡œ promiseë¥¼ ë°˜í™˜í•˜ê³ , promiseê°€ í•¨ìˆ˜ë¡œë¶€í„° ë°˜í™˜í•  ê°’ì„ resolve í•œë‹¤.

```jsx
// í”„ë¡œë¯¸ìŠ¤ ê°ì²´ ë°˜í™˜ í•¨ìˆ˜
function delay(ms) {
  return new Promise((resolve) => {
    setTimeout(() => {
      console.log(`${ms} ë°€ë¦¬ì´ˆê°€ ì§€ë‚¬ìŠµë‹ˆë‹¤.`);
      resolve();
    }, ms);
  });
}
```

```jsx
// ê¸°ì¡´ Promise.then() í˜•ì‹
function main() {
  delay(1000)
    .then(() => {
      return delay(2000);
    })
    .then(() => {
      return Promise.resolve("ë");
    })
    .then((result) => {
      console.log(result);
    });
}

// ë©”ì¸ í•¨ìˆ˜ í˜¸ì¶œ
main();
```

- ìœ„ ì½”ë“œì—ì„œ promiseëŠ” then ë©”ì„œë“œë¥¼ ì—°ì†ì ìœ¼ë¡œ ì‚¬ìš©í•˜ì—¬ ë¹„ë™ê¸° ì²˜ë¦¬ë¥¼ í•˜ì§€ë§Œ, async/awaitëŠ” await í‚¤ì›Œë“œë¡œ ë¹„ë™ê¸° ì²˜ë¦¬ë¥¼ ê¸°ë‹¤ë¦¬ê³  ìˆë‹¤ëŠ” ê²ƒì„ ì§ê´€ì ìœ¼ë¡œ í‘œí˜„í•˜ê³  ìˆìŒì„ ë³¼ ìˆ˜ ìˆë‹¤.

```jsx
// async/await ë°©ì‹
async function main() {
  await delay(1000);
  await delay(2000);
  const result = await Promise.resolve("ë");
  console.log(result);
}

// ë©”ì¸ í•¨ìˆ˜ í˜¸ì¶œ
main();
```

- async/awaitì˜ ì¥ì ì€ ë¹„ë™ê¸°ì  ì ‘ê·¼ë°©ì‹ì„ ë™ê¸°ì ìœ¼ë¡œ ì‘ì„±í•  ìˆ˜ ìˆê²Œ í•´ì£¼ì–´ ì½”ë“œê°€ ê°„ê²°í•´ì§€ë©° ê°€ë…ì„±ì„ ë†’ì—¬ì ¸ ìœ ì§€ë³´ìˆ˜ë¥¼ ìš©ì´í•˜ê²Œ í•´ì¤€ë‹¤.

## async í‚¤ì›Œë“œ

- function ì•ì— asyncì„ ë¶™ì—¬ì¤Œìœ¼ë¡œì¨, í•¨ìˆ˜ ë‚´ì—ì„œ await í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ëœë‹¤. ì´ëŠ” ë°˜ëŒ€ë¡œ ë§í•˜ë©´ await í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„  ë°˜ë“œì‹œ async function ì •ì˜ê°€ ë˜ì–´ ìˆì–´ì•¼ í•œë‹¤ëŠ” ë§ê³¼ ê°™ë‹¤.

```jsx
// í•¨ìˆ˜ ì„ ì–¸ì‹
async function func1() {
  const res = await fetch(url); // ìš”ì²­ì„ ê¸°ë‹¤ë¦¼
  const data = await res.json(); // ì‘ë‹µì„ JSONìœ¼ë¡œ íŒŒì‹±
}
func1();

// í•¨ìˆ˜ í‘œí˜„ì‹
const func2 = async () => {
  const res = await fetch(url); // ìš”ì²­ì„ ê¸°ë‹¤ë¦¼
  const data = await res.json(); // ì‘ë‹µì„ JSONìœ¼ë¡œ íŒŒì‹±
};
func2();
```

```jsx
function hello() {
  return "hello";
}

async function helloAs() {
  return "hello Asy";
}

// ê²°ê³¼
hello(); //'hello'
helloAs(); // PromiseÂ {<fulfilled>: 'hello Asy'}
```

- ìœ„ë¥¼ ì¶œë ¥í•˜ë©´ Promise ê°ì²´ê°€ ì¶œë ¥ë¨
- í•¨ìˆ˜ ì•ì— **async**ë¥¼ ë¶™ì´ë©´ ìë™ì ìœ¼ë¡œ **Promiseë¥¼ ë¦¬í„´í•˜ëŠ” ë¹„ë™ê¸° ì²˜ë¦¬ í•¨ìˆ˜**ê°€ ëœë‹¤.

```jsx
function hello() {
  return "hello";
}

async function helloAs() {
  return "hello Asy";
}
helloAs().then((res) => {
  console.log(res);
});

// ê²°ê³¼
// hello Asy
```

### async ë¦¬í„´ê°’ì€ Promise ê°ì²´

- async í‚¤ì›Œë“œë¥¼ ë¶™ì¸ functionì—ì„œ ê°’ì„ ë¦¬í„´í•œ ê²°ê³¼ëŠ”?

```jsx
async function func1() {
  return 1;
}

const data = func1();
console.log(data); // í”„ë¡œë¯¸ìŠ¤ ê°ì²´ê°€ ë°˜í™˜ëœë‹¤
```

![image](https://github.com/YuHyeonWook/TIL/assets/110236953/1ea2fc32-ddbc-4291-b26e-670dab3301aa)

- ì •ìˆ˜ 1ì„ ë¦¬í„´í–ˆìŒì—ë„ ìœ„ ê²°ê³¼ì—ì„œ ë³´ë“¯ì´, ì´í–‰(fulfilled) ìƒíƒœì˜ í”„ë¡œë¯¸ìŠ¤ ê°ì²´ í˜•íƒœë¡œ ë°˜í™˜ë¨ì„ ë³¼ ìˆ˜ ìˆë‹¤. ì´ë¥¼ í†µí•´Â **async functionì—ì„œ ì–´ë–¤ ê°’ì„ ë¦¬í„´í•˜ë“  ë¬´ì¡°ê±´ í”„ë¡œë¯¸ìŠ¤ ê°ì²´ë¡œ ê°ì‹¸ì ¸ ë°˜í™˜Â ëœë‹¤**ëŠ” íŠ¹ì§•ì„ ì•Œ ìˆ˜ ìˆë‹¤.

### ë‹¤ë¥¸ Promise ìƒíƒœë¥¼ ë°˜í™˜í•˜ê¸°

- ì§ì ‘ í”„ë¡œë¯¸ìŠ¤ ì •ì  ë©”ì„œë“œë¥¼ í†µí•´ ë‹¤ìŒê³¼ ê°™ì´ í”„ë¡œë¯¸ìŠ¤ ìƒíƒœ(state)ë¥¼ ë‹¤ë¥´ê²Œ ì§€ì •í•˜ì—¬ ë°˜í™˜ì´ ê°€ëŠ¥í•˜ë‹¤.

```jsx
async function resolveP() {
  return Promise.resolve(2);
}

async function rejectP() {
  return Promise.reject(2);
}
```

![image](https://github.com/YuHyeonWook/TIL/assets/110236953/0a95722f-4d15-44ab-aef1-6ae13a98abb9)

- reject ê°™ì€ ê²½ìš° ìœ„ì™€ ê°™ì´ Promise.reject() ì •ì  ë©”ì„œë“œë¥¼ í†µí•´ ë°˜í™˜ë˜ëŠ” í”„ë¡œë¯¸ìŠ¤ ìƒíƒœë¥¼ ì‹¤íŒ¨(rejected) ìƒíƒœë¡œ ì§€ì •í•´ì¤„ ìˆ˜ ìˆì§€ë§Œ, async í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ ì˜ˆì™¸ throwë¥¼ í•´ë„ ì‹¤íŒ¨ ìƒíƒœì˜ í”„ë¡œë¯¸ìŠ¤ ê°ì²´ê°€ ë°˜í™˜ë˜ê²Œ ëœë‹¤.

```jsx
async function errorFunc() {
  throw new Error("í”„ë¡œë¯¸ìŠ¤ reject ë°œìƒì‹œí‚´");
}
```

![image](https://github.com/YuHyeonWook/TIL/assets/110236953/34436213-5bf0-484e-885e-f8e29e789453)

- async functionì—ì„œ ì¼ë¶€ëŸ¬ returnì„ í•˜ì§€ ì•Šì•„ë„ ìë™ìœ¼ë¡œ return undefiendÂ ìœ¼ë¡œ ì²˜ë¦¬ ë˜ê¸° ë•Œë¬¸ì— ë¬´ì¡°ê±´ í”„ë¡œë¯¸ìŠ¤ ê°ì²´ë¥¼ ë°˜í™˜í•˜ê²Œ ëœë‹¤.

![image](https://github.com/YuHyeonWook/TIL/assets/110236953/f265545a-0734-463e-ba1d-a10daa10a6a3)

### async í•¨ìˆ˜ì™€ then í•¸ë“¤ëŸ¬

- async í•¨ìˆ˜ì˜ ë¦¬í„´ê°’ì€ í”„ë¡œë¯¸ìŠ¤ ê°ì²´ì´ê¸° ë•Œë¬¸ì— async í•¨ìˆ˜ ìì²´ì— then í•¸ë“¤ëŸ¬ë¥¼ ë¶™ì¼ ìˆ˜ë„ ìˆë‹¤.

```jsx
async function func1() {
  return 1;
}

func1().then((data) => console.log(data));
```

## await í‚¤ì›Œë“œ

- awaitëŠ” promise.then() ë³´ë‹¤ ê¹”ë”í•œ ì½”ë“œ(?)ë¡œ ë¹„ë™ê¸° ì²˜ë¦¬ì˜ ê²°ê³¼ê°’ì„ ì–»ì„ ìˆ˜Â ìˆë„ë¡ í•´ì£¼ëŠ” ë¬¸ë²•ì´ë‹¤.
- ì˜ˆë¥¼ë“¤ì–´ ì„œë²„ì— ë¦¬ì†ŒìŠ¤ë¥¼ ìš”ì²­í•˜ëŠ” fetch() ë¹„ë™ê¸° í•¨ìˆ˜ë¥¼ then í•¸ë“¤ëŸ¬ ë°©ì‹ìœ¼ë¡œ ê²°ê³¼ë¥¼ ì–»ì–´ ì‚¬ìš©í•´ì™”ì„ ê²ƒì´ë‹¤.

```jsx
// then í•¸ë“¤ëŸ¬ ë°©ì‹
fetch(url)
  .then((res) => res.json()) // ì‘ë‹µì„ JSONìœ¼ë¡œ íŒŒì‹±
  .then((data) => {
    // data ì²˜ë¦¬
    console.log(data);
  });
```

- await í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•˜ë©´ then í•¸ë“¤ëŸ¬ë¥¼ ë³µì¡í•˜ê²Œ ì²˜ë¦¬í•  í•„ìš” ì—†ì´, ì‹¬í”Œí•˜ê²Œ ë¹„ë™ê¸° í•¨ìˆ˜ ì™¼ìª½ì— awaitë§Œ ëª…ì‹œí•´ì£¼ê³  ê²°ê³¼ê°’ì„ ë³€ìˆ˜ì— ë°›ë„ë¡ ì½”ë“œë¥¼ ì •ì˜í•˜ë©´ ëì´ë‹¤.
- thenê³¼ ì½œë°± í•¨ìˆ˜ë¥¼ ë‚¨ë°œí•˜ì—¬ ì½”ë“œê°€ ë“¤ì—¬ì“°ê¸°ë¡œ ê¹Šì–´ì§€ëŠ” ê²ƒì„ ë°©ì§€í•˜ê³ , í•œ ì¤„ ë ˆë²¨ì—ì„œ ì½”ë“œë¥¼ ë‚˜ì—´í•˜ì—¬ ê°€ë…ì„±ì„ ë†’ì¼ ìˆ˜ ìˆë‹¤.

```jsx
// await ë°©ì‹
async function func() {
  const res = await fetch(url); // ìš”ì²­ì„ ê¸°ë‹¤ë¦¼
  const data = await res.json(); // ì‘ë‹µì„ JSONìœ¼ë¡œ íŒŒì‹±
  // data ì²˜ë¦¬
  console.log(data);
}
func();
```

### awaitëŠ” Promise ì²˜ë¦¬ê°€ ëë‚ ë•Œê¹Œì§€ ê¸°ë‹¤ë¦¼

- **awaitì€ Promise ë¹„ë™ê¸° ì²˜ë¦¬ê°€ ì™„ë£Œë ë•Œ ê¹Œì§€ ì½”ë“œ ì‹¤í–‰ì„ ì¼ì‹œ ì¤‘ì§€í•˜ê³  wait í•œë‹¤**ë¼ëŠ” ëœ»ì´ë‹¤.
  - ì˜ˆë¥¼ ë“¤ì–´ fetch() í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ì„œë²„ì—ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ê²½ìš°ë¥¼ ë– ì˜¬ë ¤ë³´ë©´, ì´ fetch() í•¨ìˆ˜ëŠ” Promiseë¥¼ ë°˜í™˜í•œë‹¤. ë”°ë¼ì„œ await í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ Promiseê°€ ì²˜ë¦¬ë  ë•Œê¹Œì§€ ì½”ë“œ ì‹¤í–‰ì„ ì¼ì‹œ ì¤‘ì§€í•˜ê³ , Promiseê°€ ì²˜ë¦¬ë˜ë©´ ê²°ê³¼ ê°’ì„ ë°˜í™˜í•˜ì—¬ ë³€ìˆ˜ì— í• ë‹¹í•˜ëŠ” ì‹ì´ë‹¤.

```jsx
async function getData() {
  const response = await fetch('https://jsonplaceholder.typicode.com/users/1');
  const data = await response.json();
  console.log(data):
}
```

- ìœ„ ì˜ˆì œë¥¼ ë³´ë©´ getData() async í•¨ìˆ˜ ë‚´ì—ì„œ fetch() ë¹„ë™ê¸° í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ê³ , ë°˜í™˜ëœ Promiseë¥¼ await í‚¤ì›Œë“œë¡œ ì²˜ë¦¬í•œë‹¤.
- ì´ë¡œ ì¸í•´ í•¨ìˆ˜ ë‚´ ì½”ë“œ ì‹¤í–‰ì´ ì¼ì‹œ ì¤‘ì§€ë˜ê³ , fetch() í•¨ìˆ˜ê°€ ì™„ë£Œë  ë•Œê¹Œì§€ ê¸°ë‹¤ë¦¬ê²Œ ëœë‹¤. â†’ ì„œë²„ë¡œë¶€í„° ë¦¬ì†ŒìŠ¤ë¥¼ ì„±ê³µì ìœ¼ë¡œ ê°€ì ¸ì™€ fetch() í•¨ìˆ˜ê°€ ì™„ë£Œë˜ë©´, ë°”ë¡œ ë‹¤ìŒresponse.json() í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ì—¬ ë°˜í™˜ëœ Promiseë¥¼ ë‹¤ì‹œ awaitë¡œ ì²˜ë¦¬í•œë‹¤. â†’ ë‹¤ì‹œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ë™ì•ˆ ì½”ë“œ ì‹¤í–‰ì´ ì¼ì‹œ ì¤‘ì§€ë˜ê³ , ë°ì´í„°ê°€ ì„±ê³µì ìœ¼ë¡œ ê°€ì ¸ì™€ì§€ë©´ ìµœì¢… ê²°ê³¼ ê°’ì„ ë°˜í™˜í•œë‹¤.
- ë”°ë¼ì„œ **awaitëŠ” Promiseë¥¼ ì²˜ë¦¬í•˜ê³  ê²°ê³¼ë¥¼ ë°˜í™˜í•˜ëŠ” ë°, ë¹„ë™ê¸°ì ì¸ ì‘ì—…ì„ ë™ê¸°ì ìœ¼ë¡œ ì²˜ë¦¬í•  ìˆ˜ ìˆê²Œ ë˜ëŠ” ê²ƒ**ì´ë‹¤.

### async/await ì—ëŸ¬ ì²˜ë¦¬

- ê¸°ì¡´ì˜ Promise.then() ë°©ì‹ì˜ ì—ëŸ¬ ì²˜ë¦¬ëŠ” catch() í•¸ë“¤ëŸ¬ë¥¼ ì¤‘ê°„ ì¤‘ê°„ì— ëª…ì‹œí•¨ìœ¼ë¡œì¨ ì—ëŸ¬ë¥¼ ë°›ì•„ì•¼ë§Œ í–ˆê³ , ì¼ë°˜ì ìœ¼ë¡œ ì—ëŸ¬ë¥¼ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ì„  try/catch ë¬¸ì„ ì‚¬ìš©í•˜ì—¬ ì—ëŸ¬ë¥¼ ì²˜ë¦¬í•´ì™”ë‹¤ .

```jsx
// then í•¸ë“¤ëŸ¬ ë°©ì‹
function fetchResource(url) {
  fetch(url)
    .then((res) => res.json()) // ì‘ë‹µì„ JSONìœ¼ë¡œ íŒŒì‹±
    .then((data) => {
      // data ì²˜ë¦¬
      console.log(data);
    })
    .catch((err) => {
      // ì—ëŸ¬ ì²˜ë¦¬
      console.error(err);
    });
}
```

- async/awaitë„ ë¹„ë™ê¸° ì²˜ë¦¬ì— ëŒ€í•œ ì—ëŸ¬ë¥¼ ì²˜ë¦¬í•  í•„ìš”ê°€ ìƒê¸°ë©´ ê·¸ëŒ€ë¡œ try/catchë¬¸ì„ ì”Œìš°ë©´ ëœë‹¤.

```jsx
// async/await ë°©ì‹
async function func() {
  try {
    const res = await fetch(url); // ìš”ì²­ì„ ê¸°ë‹¤ë¦¼
    const data = await res.json(); // ì‘ë‹µì„ JSONìœ¼ë¡œ íŒŒì‹±
    // data ì²˜ë¦¬
    console.log(data);
  } catch (err) {
    // ì—ëŸ¬ ì²˜ë¦¬
    console.error(err);
  }
}
func();
```

- ì´ì²˜ëŸ¼ async/awaitì˜ ì¥ì ì€ ë¹„ë™ê¸° ì½”ë“œë¥¼ ë§ˆì¹˜ ë™ê¸° ì½”ë“œì²˜ëŸ¼ ì½íˆê²Œ í•´ì¤€ë‹¤ëŠ” ê²ƒì´ë‹¤. ìš°ë¦¬ê°€ ì¼ë°˜ì ìœ¼ë¡œ ì½”ë“œë¥¼ ì“°ê³  ì½ì–´ ë‚´ë¦¬ë“¯ì´

## ì ì ˆí•œ async/await ì‚¬ìš©

- await í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•˜ë©´ ë¹„ë™ê¸°ê°€ ê°•ì œì ìœ¼ë¡œ ë™ê¸° ì²˜ë¦¬ê°€ ë˜ì–´ ì½”ë“œê°€ ìˆœì°¨ì ìœ¼ë¡œ ìˆ˜í–‰ëœë‹¤. ê·¸ëŸ¬ë©´ ì´ë¥¼ ì–´ë–»ê²Œ â€˜ë³‘ë ¬ ì²˜ë¦¬â€™ í•œë‹¤ëŠ” ê²ƒì¼ê¹Œ? í•µì‹¬ì€ í”„ë¡œë¯¸ìŠ¤ ê°ì²´ í•¨ìˆ˜ë¥¼ awaitê³¼ ê°™ì´ ì¨ì„œ ì‹¤í–‰ì‹œí‚¤ëŠ” ê²Œ ì•„ë‹ˆë¼, ë¯¸ë¦¬ í•¨ìˆ˜ë¥¼ ë™ê¸°/ë…¼ë¸”ë¡í‚¹ìœ¼ë¡œ ì‹¤í–‰í•˜ê³  ê·¸ ê²°ê³¼ í”„ë¡œë¯¸ìŠ¤ ê°’ì„ awaitë¥¼ í†µí•´ ë°›ëŠ” ì‹ì´ë‹¤.
- ê¸°ì¡´ì—ëŠ” ë¹„ë™ê¸° ì²˜ë¦¬ ìš”ì²­ì„ í•˜ê³  ë™ì‹œì— ìš”ì²­ì´ ì™„ë£Œë ë•Œ ê¹Œì§€ await í•˜ì˜€ê¸° ë•Œë¬¸ì— 1ì´ˆì•ˆì— ì²˜ë¦¬ë  ê²ƒì´ 2ì´ˆê°€ ê±¸ë ¸ë‹¤.

```jsx
async function getFruites() {
  let a = await getApple(); // getApple() ë¹„ë™ê¸° ì²˜ë¦¬ë¥¼ ìš”ì²­í•˜ê³ , ìš”ì²­ì´ ì²˜ë¦¬ë ë•Œ ê¹Œì§€ ê¸°ë‹¤ë¦¼ (1ì´ˆ ì†Œìš”)
  let b = await getBanana(); // getBanana() ë¹„ë™ê¸° ì²˜ë¦¬ë¥¼ ìš”ì²­í•˜ê³ , ìš”ì²­ì´ ì²˜ë¦¬ë ë•Œ ê¹Œì§€ ê¸°ë‹¤ë¦¼ (1ì´ˆ ì†Œìš”)
  console.log(`${a} and ${b}`); // ì´ 2ì´ˆ ì†Œìš”
}
```

- getApple()Â ì™€getBanana()Â ë¹„ë™ê¸° ë¡œì§ì´ ìˆœì„œë¥¼ ì§€ì¼œì•¼í•˜ëŠ” ë¡œì§ì´ë¼ë©´ ìœ„ì™€ ê°™ì´ êµ¬ì„±í•˜ì—¬ì•¼ í•˜ëŠ” ê²ƒì´ ì˜³ì§€ë§Œ, í˜„ì¬ë¡œì„œëŠ” ì„œë¡œ ì—°ê´€ ì—†ê¸° ë•Œë¬¸ì— ë°˜ë“œì‹œ ìˆœì°¨ì ìœ¼ë¡œ ì‹¤í–‰ ì‹œí‚¬ í•„ìš”ê°€ ì—†ë‹¤. ë”°ë¼ì„œ ë¹„ë™ê¸° ì²˜ë¦¬ ìš”ì²­ê³¼ ê°’ì„ await í•˜ëŠ” ë¡œì§ì„ ë¶„ë¦¬ì‹œí‚¤ë©´ ëœë‹¤.

```jsx
async function getFruites(){

  let getApplePromise = getApple(); // asyncí•¨ìˆ˜ë¥¼ ë¯¸ë¦¬ ë…¼ë¸”ë¡í‚¹ìœ¼ë¡œ ì‹¤í–‰í•œë‹¤.
  let getBananaPromise = getBanana(); // asyncí•¨ìˆ˜ë¥¼ ë¯¸ë¦¬ ë…¼ë¸”ë¡í‚¹ìœ¼ë¡œ ì‹¤í–‰í•œë‹¤.

  // ì´ë ‡ê²Œ í•˜ë©´ ê°ê° ë°±ë‹¨ì—ì„œ ë…ë¦½ì ìœ¼ë¡œ ê±°ì˜ ë™ì‹œì— ì‹¤í–‰ë˜ê²Œ ëœë‹¤.
  console.log(getApplePromise)
  console.log(getBananaPromise)

  let a = await getApplePromise; // ìœ„ì—ì„œ ë°›ì€ í”„ë¡œë¯¸ìŠ¤ê°ì²´ ê²°ê³¼ ë³€ìˆ˜ë¥¼ awaitì„ í†µí•´ êº¼ë‚¸ë‹¤.
  let b = await getBananaPromise; // ìœ„ì—ì„œ ë°›ì€ í”„ë¡œë¯¸ìŠ¤ê°ì²´ ê²°ê³¼ ë³€ìˆ˜ë¥¼ awaitì„ í†µí•´ êº¼ë‚¸ë‹¤.

  console.log(`${a} and ${b}`); // ë³¸ë˜ë¼ë©´ 1ì´ˆ+1ì´ˆ ë¥¼ ê¸°ë‹¤ë ¤ì•¼ í•˜ëŠ”ë°, ìœ„ì—ì„œ 1ì´ˆê¸°ë‹¤ë¦¬ëŠ” í•¨ìˆ˜ë¥¼ ë°”ë¡œ ì—°ì†ìœ¼ë¡œ ë¹„ë™ê¸°ë¡œ ë¶ˆë ¤ì™”ê¸° ë•Œë¬¸ì—, ëŒ€ì¶© 1.01ì´ˆë§Œ ê¸°ë‹¤ë¦¬ë©´ ì²˜ë¦¬ëœë‹¤.
})
```

![image](https://github.com/YuHyeonWook/TIL/assets/110236953/94f4053a-a1e5-4674-802e-535f5dc4f04a)

## Async/Await ë‚´ë¶€ ë™ì‘ ê³¼ì •

```
const one = () => Promise.resolve('One!');

async function myFunc(){
	console.log('In function!');
	const res = await One();
	console.log(res);
}

console.log('Before Function!');
myFunc();
console.log('After Function!');
```

![image](https://github.com/YuHyeonWook/TIL/assets/110236953/65add181-dadd-462c-b590-456ba24d2c94)

1. ì½˜ì†”ì— 'Before Function!' ì´ ì¶œë ¥ëœë‹¤.
2. async í•¨ìˆ˜ì¸myFunc() ì´ í˜¸ì¶œëœë‹¤.
3. async í•¨ìˆ˜ ì•ˆì— ìˆëŠ” ì½˜ì†” í•¨ìˆ˜ê°€ ì‹¤í–‰ë˜ì–´ ì½˜ì†”ì—Â 'In Function!' ì´ ì¶œë ¥ëœë‹¤.
4. Promise ê°ì²´ë¥¼ ë°˜í™˜í•˜ëŠ”one() ë¹„ë™ê¸° í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•œë‹¤.
5. ì´ë•Œone()Â ë¹„ë™ê¸° í•¨ìˆ˜ ì™¼ìª½ì—awaitÂ í‚¤ì›Œë“œë¡œ ì¸í•´,myFuncÂ í•¨ìˆ˜ì˜ ë‚´ë¶€ ì‹¤í–‰ì€ ì ì‹œ ì¤‘ë‹¨ë˜ê³ Â Call stackÂ ì—ì„œ ë¹ ì ¸ë‚˜ì™€ ë‚˜ë¨¸ì§€ ë¶€ë¶„ì€Â Microtask QueueÂ ì— ì ì¬ëœë‹¤. ì´ëŠ” ìë°”ìŠ¤í¬ë¦½íŠ¸ ì—”ì§„ì´awaitÂ í‚¤ì›Œë“œë¥¼ ì¸ì‹í•˜ë©´Â asyncÂ í•¨ìˆ˜ì˜ ì‹¤í–‰ì€ ì§€ì—°ë˜ëŠ” ê²ƒìœ¼ë¡œ ì²˜ë¦¬í•˜ê¸° ë•Œë¬¸ì´ë‹¤.
6. ë§ˆì§€ë§‰ìœ¼ë¡œÂ ì½˜ì†”ì—Â 'After Function!' ì´ ì¶œë ¥ëœë‹¤.
7. ëª¨ë“  ë©”ì¸ ìŠ¤ë ˆë“œì˜ ìë°”ìŠ¤í¬ë¦½íŠ¸ ì½”ë“œê°€ ì‹¤í–‰ì´ë˜ì–´ ë”ì´ìƒ Call Stackì—” ì‹¤í–‰í•  ìŠ¤íƒì´ ì—†ì–´ ë¹„ì›Œì§€ê²Œ ëœë‹¤.
8. ê·¸ëŸ¬ë©´ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ê°€ ì´ë¥¼ ê°ì§€í•˜ì—¬, Microtask Queueì— ë‚¨ì•„ìˆëŠ” async í•¨ìˆ˜ë¥¼ ë¹¼ì™€ Call Stackì— ì ì¬í•˜ê²Œ ëœë‹¤.
9. Promise ê°ì²´ì˜ ê²°ê³¼ë¬¼ì¸ 'One!' ë¬¸ìì—´ì„ ë³€ìˆ˜res ì— ë°›ê³  ì´ë¥¼ ì½˜ì†”ì— ì¶œë ¥í•œë‹¤.

<br>

# ì°¸ê³ 

- [https://inpa.tistory.com/entry/ğŸ”„-ìë°”ìŠ¤í¬ë¦½íŠ¸-ì´ë²¤íŠ¸-ë£¨í”„-êµ¬ì¡°-ë™ì‘-ì›ë¦¬](https://inpa.tistory.com/entry/%F0%9F%94%84-%EC%9E%90%EB%B0%94%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8-%EC%9D%B4%EB%B2%A4%ED%8A%B8-%EB%A3%A8%ED%94%84-%EA%B5%AC%EC%A1%B0-%EB%8F%99%EC%9E%91-%EC%9B%90%EB%A6%AC)
- [https://medium.com/@constell99/ìë°”ìŠ¤í¬ë¦½íŠ¸ì˜-async-await-ê°€-promisesë¥¼-ì‚¬ë¼ì§€ê²Œ-ë§Œë“¤-ìˆ˜-ìˆëŠ”-6ê°€ì§€-ì´ìœ -c5fe0add656c](https://medium.com/@constell99/%EC%9E%90%EB%B0%94%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8%EC%9D%98-async-await-%EA%B0%80-promises%EB%A5%BC-%EC%82%AC%EB%9D%BC%EC%A7%80%EA%B2%8C-%EB%A7%8C%EB%93%A4-%EC%88%98-%EC%9E%88%EB%8A%94-6%EA%B0%80%EC%A7%80-%EC%9D%B4%EC%9C%A0-c5fe0add656c)
- [https://inpa.tistory.com/entry/JS-ğŸ“š-ë¹„ë™ê¸°ì²˜ë¦¬-async-await](https://inpa.tistory.com/entry/JS-%F0%9F%93%9A-%EB%B9%84%EB%8F%99%EA%B8%B0%EC%B2%98%EB%A6%AC-async-await)
